/**
 * Root
 */

// Generate classes such as ".animation-duration-100ms"
&
  $duration: 0ms
  @while $duration <= $animation-duration-max
    .animation-duration-#{$duration}
      animation-duration: $duration
    $duration: $duration + 50ms


.square_based_animation
  position: absolute;
  width: $square-width
  height: $square-height
  opacity: 0.0

  &.square_based_animation--shock-blue
    background-color: blue
    animation-name: square_based_animation--shock
  &.square_based_animation--shock-red
    background-color: red
    animation-name: square_based_animation--shock

  @keyframes square_based_animation--shock
    0%
      opacity: 0.0
    30%
      opacity: 0.5
    100%
      opacity: 0.0


.react-transition-dead-unit-leave
  opacity: 1
.react-transition-dead-unit-leave-active
  opacity: 0.01
  transition: opacity 500ms ease-in


.unit-state-change-effect
  $unit-state-change-effect-height: 16px
  position: absolute
  height: $unit-state-change-effect-height
  width: $square-width
  line-height: $unit-state-change-effect-height
  font-size: $unit-state-change-effect-height
  font-weight: bold
  text-align: center
  opacity: 0.0
  @keyframes unit-state-change-effect
    0%
      transform: translateY(16px)
      opacity: 1.0
    100%
      transform: translateY(0px)
      opacity: 0.0
  animation-name: unit-state-change-effect
  animation-duration: $unit-state-change-effect-duration + ms
  &.unit-state-change-effect--damage-points
    color: blue
  &.unit-state-change-effect--healing-points
    color: lime


.unit
  $z-index-effect-container: 2
  $z-index-animation-container: 1
  $z-index-icon: 0
  width: $square-width
  height: $square-height
  &.unit--ally
    color: blue
  &.unit--enemy
    color: red
  &__effect-container
    position: absolute
    width: 100%
    height: 100%
    z-index: $z-index-effect-container
  &__animation-container
    position: absolute
    width: 100%
    height: 100%
    z-index: $z-index-animation-container
  &__icon
    position: absolute
    display: block
    top: 8px
    left: 8px
    width: 32px
    height: 32px
    z-index: $z-index-icon
    animation-name: unit-breathing
    animation-duration: 1s
    animation-iteration-count: infinite
    animation-direction: alternate
    @keyframes unit-breathing
      0%
        transform: translateY(-1px)
        text-shadow: 5px 5px #aaa
      100%
        transform: translateY(1px)
        text-shadow: 3px 3px #aaa

.square
  position: absolute
  width: $square-width
  height: $square-height
  background-color: #fff
  border: 1px solid $app-background-color
  &.square--landform-castle
    background-color: #808000
  &.square--landform-desert
    background-color: #ffff00
  &.square--landform-forest
    background-color: #008000
  &.square--landform-fort
    background-color: #c0c0c0
  &.square--landform-grassfield
    background-color: #00ff00
  &.square--landform-mountain
    background-color: #808080
  &.square--landform-river
    background-color: #00ffff
  &.square--landform-road
    background-color: #efefef

.square-matrix
  $z-index-touchpad: 9999
  $z-index-cursor: 5
  $z-index-bullet: 4
  $z-index-square-based-animation-container: 3
  $z-index-unit: 2
  $z-index-unit-on-square: 1
  position: relative;
  width: 100%
  height: 100%
  overflow: hidden
  &__touchpad
    position: absolute;
    width: 100%
    height: 100%
    z-index: $z-index-touchpad
  &__cursor
    position: absolute;
    width: $square-width
    height: $square-height
    z-index: $z-index-cursor
    border: 2px solid #ff5f00
  &__bullet
    position: absolute
    z-index: $z-index-bullet
  &__square-based-animation-container
    position: absolute;
    width: 100%
    height: 100%
    z-index: $z-index-square-based-animation-container
  &__unit
    position: absolute;
    z-index: $z-index-unit
  &__unit--is-alive
    transition: top $tick-interval * 4 + ms ease, left $tick-interval * 4 + ms ease
  &__unit-on-square
    position: absolute;
    z-index: $z-index-unit-on-square

.bullet
  width: 8px
  height: 8px
  background-color: red

.root
  margin: 0 auto
  position: relative
  width: $app-width
  height: $app-height
  z-index: $z-index-base
  background-color: $app-background-color
  color: $app-color
  &__status-bar
    height: 24px
    ul
      display: flex
      justify-content: center
      li
        margin-right: 10px
  &__battle-board
    // width/height are set from JS
    position: relative
    margin: 4px auto 0 auto
  &__recruitment-board
    position: relative
    margin: 8px auto 0 auto
    background-color: gray
